# language: python
# descomprimir_tve.py
import zlib

# Copia TODOS los bytes de tve_binh_data aquí (los que ya tienes en tve.h)
compressed_data = bytes([
120,156,117,149,189,87,26,89,24,198,255,134,221,236,137,49,128,115,118,181,113,177,9,146,168,35,48,231,160,105,208,52,18,141,202,0,231,44,177,82,155,128,9,10,195,20,193,52,129,52,225,195,40,204,52,74,181,144,45,2,110,148,153,169,132,106,161,18,162,200,220,78,186,157,115,246,35,19,69,152,189,23,205,199,158,236,222,247,208,205,143,231,253,184,239,115,21,229,223,71,148,21,5,200,172,36,72,66,131,6,78,64,0,177,132,149,177,34,86,118,86,177,170,19,208,85,1,40,64,105,40,178,130,190,132,241,249,0,25,200,142,134,163,97,130,12,95,74,22,248,2,85,96,10,116,142,205,49,57,134,15,240,160,132,21,157,101,182,10,0,144,16,255,153,5,10,43,211,18,6,20,145,41,217,11,14,222,196,247,228,78,210,39,59,173,116,34,202,69,91,73,77,74,147,162,51,66,78,225,157,69,166,44,92,242,95,146,13,32,154,74,206,66,61,219,206,82,59,205,8,153,84,69,207,67,248,186,129,34,169,196,122,34,156,12,215,163,4,195,166,218,57,83,17,86,208,128,60,36,5,153,150,9,72,210,165,158,2,159,181,167,53,201,139,200,90,112,51,184,23,26,242,120,61,222,135,181,165,26,185,79,214,30,170,87,24,74,92,39,94,48,76,59,67,20,89,0,121,69,80,104,25,107,8,162,163,36,114,84,186,149,200,71,252,161,35,119,183,103,196,179,98,235,90,122,239,170,88,223,141,225,227,190,201,173,201,60,217,34,3,203,34,229,128,188,146,131,245,3,148,51,33,241,48,99,142,51,236,156,36,108,193,115,223,145,123,195,149,115,13,90,223,216,52,25,182,74,167,142,198,222,14,158,15,226,6,255,56,55,217,51,205,44,180,33,47,64,117,186,202,202,78,73,132,108,146,83,167,183,34,120,240,200,237,117,201,83,119,172,127,90,134,60,88,25,78,6,16,194,204,160,87,123,164,61,215,54,181,126,67,125,220,49,45,46,152,2,1,164,94,164,229,246,41,85,169,31,24,210,91,137,155,193,183,238,89,200,86,44,17,243,170,31,146,18,252,53,20,254,54,164,95,245,30,247,170,6,70,7,146,122,205,93,202,222,94,113,188,0,25,103,209,36,113,162,186,64,102,247,183,111,134,86,221,55,92,187,83,113,243,99,124,5,143,219,156,85,162,136,104,172,248,145,110,246,170,250,252,3,117,131,253,94,125,217,244,76,72,17,187,136,62,129,202,243,145,189,167,195,139,187,83,79,44,67,248,117,93,28,191,246,99,45,248,151,11,222,43,9,209,27,136,86,157,171,154,189,182,190,19,189,225,30,183,208,19,96,25,98,183,167,225,175,36,184,26,84,158,243,189,251,9,177,195,184,220,191,129,199,240,111,126,208,77,8,232,78,22,244,151,218,170,154,170,169,178,245,229,245,234,187,73,216,57,150,193,94,183,68,178,228,203,110,109,31,63,31,118,239,206,223,177,116,225,242,173,17,221,172,238,9,254,6,255,195,172,160,27,113,69,35,182,169,26,237,203,15,92,209,49,236,117,251,212,94,242,115,91,219,123,207,187,221,241,249,59,230,46,252,134,110,68,39,127,255,43,30,209,93,27,99,97,230,74,225,246,224,170,118,19,210,181,255,160,141,37,18,209,79,63,60,122,50,127,29,210,213,254,17,221,170,110,70,247,183,249,23,29,234,59,170,27,210,29,86,165,38,97,230,198,123,252,2,246,12,213,173,156,218,43,72,27,101,142,180,223,143,116,233,228,126,47,254,24,127,169,27,156,0,87,93,243,118,180,47,84,234,62,114,224,196,96,156,22,151,137,78,207,149,223,3,98,254,160,182,125,246,124,206,93,157,127,0,105,216,181,91,239,251,99,248,75,88,55,104,0,212,181,177,141,209,77,237,126,175,239,154,113,128,210,183,38,169,133,58,229,136,193,121,11,152,204,192,137,53,127,198,67,175,224,180,227,22,175,185,210,63,107,126,128,79,227,143,240,111,39,32,219,224,121,235,216,119,218,235,189,53,173,90,111,215,115,227,70,123,114,69,243,130,73,97,187,116,153,144,249,211,214,111,134,236,102,228,236,233,236,98,117,106,198,28,183,28,246,207,224,89,115,45,40,240,157,251,6,140,204,205,229,184,246,108,208,103,240,25,212,211,254,229,11,138,98,68,180,101,85,90,129,125,131,19,111,110,207,135,222,250,134,93,31,230,227,150,119,22,61,126,104,129,251,215,57,112,106,101,71,108,120,252,134,97,127,82,61,77,194,172,141,49,46,211,230,157,208,33,4,133,144,24,177,117,0,239,106,98,36,184,225,30,118,85,167,170,150,170,229,208,172,14,143,134,71,194,107,225,205,240,73,24,95,89,189,191,119,95,101,167,150,57,202,20,11,164,218,60,81,166,161,187,0,5,237,137,189,146,231,70,211,155,145,110,184,39,171,139,115,174,89,219,3,235,237,137,168,53,106,61,180,29,90,135,72,47,121,254,208,176,76,174,212,215,77,49,58,3,58,44,219,128,46,8,247,219,1,119,212,88,202,115,134,244,126,194,22,82,249,143,221,175,92,199,139,103,139,221,75,31,92,115,75,107,75,251,158,166,135,164,184,117,49,76,167,216,140,194,99,136,149,4,249,163,167,153,96,246,70,232,15,246,244,197,118,62,146,8,37,130,54,127,62,184,230,169,5,47,130,154,117,123,152,137,138,73,231,165,39,22,8,232,203,172,4,174,216,75,111,234,105,32,127,105,31,36,179,84,218,190,99,76,26,162,36,12,42,154,76,242,59,237,180,41,19,200,1,30,146,157,140,133,43,246,163,163,34,95,196,36,32,178,21,71,201,84,232,225,91,89,77,78,147,51,193,112,242,52,47,20,148,18,122,13,144,15,66,242,147,19,43,87,111,1,210,71,30,69,72,138,40,138,92,133,43,213,97,180,81,84,58,47,8,82,132,251,6,100,229,11,85,229,211,75,2,174,254,129,150,104,41,208,184,12,182,19,72,237,107,238,235,3,46,3,190,70,34,12,229,203,248,159,243,15,248,56,94,120,
    # ... pega TODO el contenido de tu array tve_binh_data ...
])

try:
    # Descomprimir con zlib
    raw_data = zlib.decompress(compressed_data)
    print(f"Descomprimido correctamente: {len(raw_data)} bytes")
    
    # Generar código C
    with open("tve_uncompressed.h", "w") as f:
        f.write("#ifndef TVE_UNCOMPRESSED_H_\n")
        f.write("#define TVE_UNCOMPRESSED_H_\n\n")
        f.write("#include <stdint.h>\n\n")
        f.write(f"// Datos RGB565 descomprimidos ({len(raw_data)} bytes)\n")
        f.write("const uint8_t tve_rgb565_data[] = {\n")
        
        for i in range(0, len(raw_data), 16):
            f.write("    ")
            for j in range(16):
                if i + j < len(raw_data):
                    f.write(f"0x{raw_data[i+j]:02X}")
                    if i + j < len(raw_data) - 1:
                        f.write(", ")
            f.write("\n")
        
        f.write("};\n\n")
        f.write(f"const size_t tve_rgb565_size = sizeof(tve_rgb565_data);\n\n")
        f.write("#endif /* TVE_UNCOMPRESSED_H_ */\n")
    
    print("Archivo generado: tve_uncompressed.h")
    
    # Imprimir primeros bytes y dimensiones posibles
    print(f"\nPrimeros 64 bytes (hex):")
    for i in range(min(64, len(raw_data))):
        print(f"{raw_data[i]:02X}", end=" ")
        if (i+1) % 16 == 0:
            print()
    
    # Calcular dimensiones (RGB565 = 2 bytes/pixel)
    pixels = len(raw_data) // 2
    print(f"\n\nPixeles totales (bytes/2): {pixels}")
    import math
    sqrt = int(math.sqrt(pixels))
    print(f"Posibles dimensiones cuadradas: {sqrt}x{sqrt}")
    print(f"Otros divisores: 32x{pixels//32}, 64x{pixels//64}, 128x{pixels//128}")
    
except Exception as e:
    print(f"Error: {e}")
    import traceback
    traceback.print_exc()